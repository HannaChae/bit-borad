<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{border: 1px solid black}
        table tr{border: 1px solid black}
        table tr td{border: 1px solid black}
        table tr th{border: 1px solid black}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1> Registration </h1>
    <a href="#" id="home"> Home </a>
    <form>
        <input type='hidden' name="bdGroup">
        <input type='hidden' name="bdOrder">
        <input type='hidden' name="bdIndent">

        <input id="productName" type="text" name="bdTitle" class="form-control mt-4 mb-2" placeholder="상품명을 입력해주세요." required>
        <input id="price" type="text" name="bdTitle" class="form-control mt-4 mb-2" placeholder="가격를 입력해주세요." required>
        <div class="form-group">
        <textarea id="option" class="form-control" row="10" name="bdContent" placeholder="옵션을 입력해주세요." required>
        </textarea></div>
        <button id="regi-btn" class="btn btn-secondary mb-3">등록하기</button>
    </form>
    <script>
        $('#home').click(e=>{location.href = '/'})
        $('#regi-btn').click(e=>{
            $.ajax({
                url:'/products',
                type:'POST',
                data:JSON.stringify({
                    productName:$('#productName').val(),
                    option:$('#option').val(),
                    price:$('#price').val()
                }),
                dataType:'json',
                contentType:'application/json',
                success: d =>{
                    if(d.message === 'SUCCESS'){
                        location.href = "/move/products/list"
                    }else{
                        alert(`상품 등록을 실패하였습니다. 다시 시도해주세요.`)
                        location.href = "/move/products/registration"
                    }
                },
                error: e =>{
                    alert(`${e} 상품등록 에러`)

                } 
            })
        })
    </script>
    
</body>
</html>